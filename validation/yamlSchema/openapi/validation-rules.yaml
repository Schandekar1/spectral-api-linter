extends: [["spectral:oas", "all"]]

functionsDir: "../../../functions"
functions: 
  - checkMethodTypes

rules:
  operation-operationId: false
  operation-tags: false
  contact-properties: false
  tag-description: false

  http-allowed-method-types:
     description: Only [GET,POST,PUT,DELETE,PATCH] method types allowed.
     given: $.paths[*]
     severity: error
     then:
       field: "@key"
       function: enumeration
       functionOptions:
          values:
            - get
            - post
            - put
            - delete
            - patch

  options-method-exist:
     description: OPTIONS method type not allowed.
     severity: error
     given: $.paths[*][options]
     then:
        function: length
        functionOptions:
          max: 0

  info-field-required:
    description: Info field is required.
    severity: warn
    given: $
    then:
      field: info
      function: truthy
    
  # http-allowed-method-types:
  #    description: Only [GET,POST,PUT,DELETE,PATCH] method types allowed.
  #    message: "{{error}}"
  #    given: $.paths[*]
  #    severity: error
  #    then:
  #      function: checkMethodTypes

  